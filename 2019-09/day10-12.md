###### tags: `ç¬¬ 11 å±† iT é‚¦éµäººè³½`

# ç”¨ Flutter é–‹ç™¼ä¸€å€‹ Android App å§ - Day10 ~ Day12


## Day 10. è¶¨å‹¢é é¢

### è¶¨å‹¢é é¢(Trending Page)

å¥½ä¹…æ²’å¾ UI è¨­è¨ˆåœ–ä¾†åˆ†è§£è©²æ€éº¼è½‰æ›æˆç¨‹å¼ç¢¼äº†ã€‚

ä»Šå¤©å°±çœ‹å€‹åˆ†è§£åœ–å§~

![day10-1.png](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day10-1.png?raw=true)


`lib/pages/trending/trending.dart`
``` dart
import 'package:flutter/material.dart';
import 'package:gitme_reborn/pages/trending/developer.dart';
import 'package:gitme_reborn/pages/trending/project.dart';

class TrendingPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return DefaultTabController(
      length: 2,
      child: Scaffold(
        appBar: AppBar(
          title: TabBar(
            tabs: <Widget>[
              Tab(text: "Project"),
              Tab(text: "Developer"),
            ],
          ),
          actions: <Widget>[
            PopupMenuButton(
              itemBuilder: (BuildContext context) {
                return [
                  PopupMenuItem(
                    child: Text("Date range: daily"),
                  ),
                ];
              },
            ),
          ],
        ),
        body: TabBarView(
          children: <Widget>[
            TrendingProjects(),
            TrendingDevelopers(),
          ],
        ),
      ),
    );
  }
}
```

å†ä¾†çœ‹çœ‹ç¨‹å¼ç¢¼æ˜¯ä¸æ˜¯æ¸…æ™°å¤šäº†å‘¢ï¼Ÿ
åŸå‰‡ä¸Šï¼Œ `TrendingPage` èˆ‡ `MainPage` å·®ä¸å¤šï¼Œæˆ‘å¹¾ä¹æ˜¯åŒä¸€å¥—æ’ç‰ˆç›´æ¥æ‹¿éä¾†ç”¨çš„ã€‚

åŸè¨­è¨ˆåœ–ä¸Šæ˜¯åˆ†æˆ Repos å’Œ Usersï¼Œä¸éä¹‹å¾Œæˆ‘ç”¨çš„ API æœƒæ˜¯ä½¿ç”¨ [`github-trending-api`](https://github.com/huchenme/github-trending-api)ã€‚

github-trending-api ä¸­çš„åˆ†é¡æ˜¯ Projects å’Œ Developersï¼Œæ‰€ä»¥æˆ‘ä¹¾è„†æ”¹æˆ `TrendingProjects` å’Œ `TrendingDevelopers` å›‰~


### è¶¨å‹¢å°ˆæ¡ˆ(TrendingProjects)

![day10-2.png](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day10-2.png?raw=true)

`lib/pages/trending/project.dart`
``` dart
import "package:flutter/material.dart";
import 'package:gitme_reborn/utils.dart';

class TrendingProjects extends StatefulWidget {
  @override
  _TrendingProjectsState createState() => _TrendingProjectsState();
}

class _TrendingProjectsState extends State<TrendingProjects> {
  List trendProjectList = [
    {
      "author": "google",
      "name": "gvisor",
      "avatar": "https://github.com/google.png",
      "url": "https://github.com/google/gvisor",
      "description": "Container Runtime Sandbox",
      "language": "Go",
      "languageColor": "#3572A5",
      "stars": 3320,
      "forks": 118,
      "currentPeriodStars": 1624,
      "builtBy": [
        {
          "href": "https://github.com/viatsko",
          "avatar": "https://avatars0.githubusercontent.com/u/376065",
          "username": "viatsko"
        }
      ]
    },
    ...(ç•¥)
  ];

  @override
  Widget build(BuildContext context) {
    return Scrollbar(
      child: RefreshIndicator(
        child: ListView.separated(
          padding: EdgeInsets.all(0.0),
          itemCount: trendProjectList.length,
          itemBuilder: (BuildContext context, int index) {
            return ListTile(
              title: Text(
                  "${trendProjectList[index]["author"]} / ${trendProjectList[index]["name"]}"),
              subtitle: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: <Widget>[
                  SizedBox(height: 8.0),
                  Text(
                      "â˜… ${trendProjectList[index]["currentPeriodStars"]} stars today"),
                  SizedBox(height: 8.0),
                  Text(trendProjectList[index]["description"]),
                  SizedBox(height: 8.0),
                  Row(
                      children: <Widget>[
                        Text("â˜… ${trendProjectList[index]["stars"]}"),
                        SizedBox(width: 16.0),
                        ...buildBuiltByList(trendProjectList[index]["builtBy"]),
                      ],
                    )
                ],
              ),
              trailing: Row(
                mainAxisSize: MainAxisSize.min,
                children: <Widget>[
                  Text("â— ", style: TextStyle(color: hexToColor(trendProjectList[index]["languageColor"]), fontSize: 24.0),),
                  Text(trendProjectList[index]["language"]),
                ],
              ),
              contentPadding:
                  EdgeInsets.symmetric(vertical: 8.0, horizontal: 16.0),
              onTap: () {},
            );
          },
          separatorBuilder: (BuildContext context, int index) =>
              const Divider(height: 0.0),
        ),
        onRefresh: () async {
          return Future.delayed(Duration(seconds: 2), () {});
        },
      ),
    );
  }

  List<Padding> buildBuiltByList(List builtByList) {
    List builtBys = builtByList.map((builtBy) {
      return Padding(
        padding: const EdgeInsets.symmetric(horizontal: 2.0),
        child: CircleAvatar(
          radius: 10.0,
          backgroundImage: NetworkImage(builtBy["avatar"]),
        ),
      );
    }).toList();
    if (builtBys.length > 7) {
      return builtBys.sublist(0, 6);
    } else {
      return builtBys;
    }
  }
}
```

å¦‚æœå°ç…§çš„åˆ†æåœ–çœ‹ï¼Œ`ListTile` çš„éƒ¨ä»½æ‡‰è©²æ²’ä»€éº¼å•é¡Œã€‚

ä¸éå€¼å¾—ä¸€æå¾—æ˜¯ CircleAvatar(s) ï¼Œå¥½åƒå°ä¸å¤ªä¸Š(?)
æ²’éŒ¯ï¼Œé€™éƒ¨ä»½æˆ‘æ˜¯ç”¨ `buildBuiltByList` é€™å€‹å‡½æ•¸ä¾†å¯¦ç¾ï¼Œè®“å®ƒèƒ½å¥½å¹¾å€‹é ­åƒä¸¦åˆ—ã€‚

> å°æé†’:
>
> * èªªå€‹å°æ’æ›²ï¼Œå…¶å¯¦åœ¨åš `List.trailing` çš„æ™‚å€™æœ‰å™´å‡ºéŒ¯èª¤ï¼Œä¸éå¾Œä¾†åƒè€ƒ [StackOverflow - Placing two trailing icons in ListTile](https://stackoverflow.com/questions/54548853/placing-two-trailing-icons-in-listtile) è§£æ±ºã€‚
> * `trendProjectList` è£¡é¢çš„è³‡æ–™æ˜¯æš«æ™‚å¾ [`github-trending-api`](https://github.com/huchenme/github-trending-api) æ‹¿ä¾†çš„ã€‚
> * é¡¯ç¤ºèªè¨€é¡è‰²æ¨™ç±¤ï¼Œç”±æ–¼ Flutter ä¸èƒ½ç›´æ¥åƒ `#001122` é€™ç¨®è‰²ç¢¼å­—ä¸²ï¼Œæ–¼æ˜¯æˆ‘åˆæ‰¾ä¾† [StackOverflow - Flutter/Dart: Convert HEX color string to Color?](https://stackoverflow.com/questions/50381968/flutter-dart-convert-hex-color-string-to-color/50382196) ä½œæ”¯æ´~


### è¶¨å‹¢é–‹ç™¼è€…(TrendingDevelopers)

æ²’éŒ¯ï¼Œä»Šå¤©çš„å¥—è·¯å°±æ˜¯å…ˆæ”¾åˆ†è§£åœ–~

![day10-3.png](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day10-3.png?raw=true)

`lib/pages/trending/developer.dart`
``` dart
import "package:flutter/material.dart";

class TrendingDevelopers extends StatefulWidget {
  @override
  _TrendingDevelopersState createState() => _TrendingDevelopersState();
}

class _TrendingDevelopersState extends State<TrendingDevelopers> {
  List trendDeveloperList = [
    {
      "username": "google",
      "name": "Google",
      "type": "organization",
      "url": "https://github.com/google",
      "avatar": "https://avatars0.githubusercontent.com/u/1342004",
      "repo": {
        "name": "traceur-compiler",
        "description":
            "Traceur is a JavaScript.next-to-JavaScript-of-today compiler",
        "url": "https://github.com/google/traceur-compiler"
      }
    },
    ...(ç•¥)
  ];

  @override
  Widget build(BuildContext context) {
    return Scrollbar(
      child: RefreshIndicator(
        child: ListView.separated(
          padding: EdgeInsets.all(0.0),
          itemCount: trendDeveloperList.length,
          itemBuilder: (BuildContext context, int index) {
            return ListTile(
              leading: CircleAvatar(
                backgroundImage:
                    NetworkImage(trendDeveloperList[index]["avatar"]),
                radius: 28.0,
              ),
              title: Row(
                // crossAxisAlignment: CrossAxisAlignment.start,
                children: <Widget>[
                  Text(trendDeveloperList[index]["name"]),
                  SizedBox(width: 16.0),
                  Text(trendDeveloperList[index]["username"]),
                ],
              ),
              subtitle: Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: <Widget>[
                  SizedBox(height: 8.0),
                  Text(
                      "ğŸ”¥ ${trendDeveloperList[index]["repo"]["name"]}"),
                  SizedBox(height: 8.0),
                  Text(trendDeveloperList[index]["repo"]["description"]),
                ],
              ),
              contentPadding:
                  EdgeInsets.symmetric(vertical: 8.0, horizontal: 16.0),
              onTap: () {},
            );
          },
          separatorBuilder: (BuildContext context, int index) =>
              const Divider(height: 0.0),
        ),
        onRefresh: () async {
          return Future.delayed(Duration(seconds: 2), () {});
        },
      ),
    );
  }
}
```

ç†è§£äº† `TrendingPrjects`ï¼Œé€™å€‹å°±ç°¡å–®å¤šäº†ï¼Œåªéœ€è¦æ³¨æ„ `ListTile` çš„å±¬æ€§å¡«å…¥äº†ä»€éº¼å°±å¥½~

> å°æé†’:
>
> * å¦‚æœæƒ³ä½œçš„æ¥µè‡´é»ï¼Œæƒ³å†ç¸®çŸ­ä¸€é»ç¨‹å¼ç¢¼ï¼Œé‚„å¯ä»¥å°‡ `ListTile` å€‹åˆ¥å°è£æˆ Widgetï¼Œä¸éç›®å‰çœ‹èµ·ä¾†é‚„æ²’æœ‰å¿…è¦æ€§ï¼Œæ‰€ä»¥å°±å…ˆé€™æ¨£å§~
 
--

æˆæœ

[![day10-4.gif](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day10-4.gif?raw=true)](https://github.com/BbsonLin/gitme_reborn/commit/baac456540a3b45aa23733f6543c1ac40c406c29)


æ„Ÿè¦ºèµ·ä¾†å¥½åƒæ²’ä½œå¾ˆå¤šæ“ä½œï¼Œä½†å…¶å¯¦äº†å¾ˆå¤šæ™‚é–“èª¿æ•´æ€éº¼ç”¨ Widget åˆ°æœ€å¤§æ•ˆæœ~
ä¹Ÿæ˜¯æŒºç‡’è…¦çš„... (æšˆ

30 å¤©ä¸­ï¼ŒUI éƒ¨ä»½ä¹Ÿçµ‚æ–¼è¦åˆ°å°¾è²äº†~
å¦‚æœçœ‹æ‹‰ UI æœ‰äº›ç…©çš„åŒå­¸ï¼ŒåŠ æ²¹! å†æ’å€‹ 2-3 å¤©å›‰~ ğŸ˜‚

---

## Day 11.

### è¨­å®šé é¢()
