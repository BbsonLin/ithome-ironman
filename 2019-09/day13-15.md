###### tags: `ç¬¬ 11 å±† iT é‚¦éµäººè³½`

# ç”¨ Flutter é–‹ç™¼ä¸€å€‹ Android App å§ - Day13 ~ Day 15


## Day 13. 

### ç™»å…¥é é¢çš„åœ–ç‰‡

å› ç‚ºç›®å‰æ­¤å°ˆæ¡ˆç‚º Gitme çš„ Reborn ç‰ˆæœ¬ï¼ŒåŸºæœ¬ä¸Šæˆ‘é‚„æ˜¯æœƒç›¡é‡é‚„åŸåŸç‰ˆ Gitme çš„è¨­è¨ˆã€‚  
åœ¨ç™»å…¥é é¢ä¸Šæ–°å¢ä¸€å€‹åœ–ç‰‡ã€‚

ä¿®æ”¹å¾Œï¼Œå¦‚åœ–

[![day13-1.png](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day13-1.png?raw=true)](https://github.com/BbsonLin/gitme_reborn/commit/bc0a9f1c9aba3e8aaf4a96ed02c1d9a93912ac57)


### App ç¸®åœ–

é‚„æœ‰å¦ä¸€å€‹å°å•é¡Œï¼Œç›®å‰åœ¨ App ç¸®åœ–çš„éƒ¨ä»½ï¼Œé‚„æ˜¯ä½¿ç”¨ Flutter é è¨­çš„ iconã€‚

![day13-2.jpeg](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day13-2.jpeg?raw=true)

å¦‚æœæƒ³æ›æ‰å®ƒï¼Œè©²æ€éº¼åšå‘¢ï¼Ÿ

éå¸¸æ„Ÿäººçš„æ˜¯ï¼Œåˆå‰›å¥½æœ‰ç¬¬ä¸‰æ–¹å¥—ä»¶å¯ä»¥ä½¿ç”¨ã€‚
ç”± Flutter Community æä¾›çš„ [flutter_launcher_icons](https://pub.dev/packages/flutter_launcher_icons#-readme-tab-)

åŸ·è¡Œæ­¥é©Ÿéå¸¸ç°¡å–®:

1. åœ¨ `pubspec.yaml` çš„ dependency åŠ å…¥ `flutter_launcher_icons: ^0.7.3`
2. åŠ å…¥ flutter_icons è¨­å®š
    ```
    flutter_icons:
      android: "launcher_icon" 
      ios: true
      image_path: "assets/icons/gitme-reborn-logo.png"
    ```
3. åœ¨ terminal ä¸­åŸ·è¡Œ `flutter pub run flutter_launcher_icons:main` åœ¨ android è·Ÿ ios çš„è³‡æ–™å¤¾ä¸­æœƒè‡ªå‹•ç”¢ç”Ÿ launcher_icon.png
    ```
    $ flutter pub run flutter_launcher_icons:main
    Android minSdkVersion = 16
    Creating default icons Android
    Adding a new Android launcher icon
    Overwriting default iOS launcher icon with new icon
    ```

ä¸‰æ­¥å°±å¤§åŠŸå‘Šæˆæ‹‰~

![day13-3.gif](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day13-3.gif?raw=true)


### 0.0.1 ç‰ˆ

[å¾…è£œ]

### å°çµ

çµ‚æ–¼çµæŸæ­¤ç³»åˆ—çš„ç¬¬ä¸€éšæ®µ - UI éƒ¨ä»½äº†~~ ğŸ¤˜  
ä¹ŸæˆåŠŸçš„æ’å®Œéµäººè³½ 1/3 äº†~~ ğŸ‰

è€å¯¦èªªï¼Œç”¨ Flutter æ‹‰æ‰‹æ©Ÿ App UI ç®—æ˜¯å¥½ä¸Šæ‰‹çš„ã€‚  
ä½†æ˜¯è¦è©³ç´°å¼„æ‡‚å…§éƒ¨åŸç†ï¼Œå¯¦åœ¨æ˜¯éœ€è¦èŠ±æ»¿å¤šæ™‚é–“çš„ã€‚

å¸Œæœ›æœ‰å¹«åŠ©åˆ°é‡åˆ°ç›¸åŒå•é¡Œçš„äºº  
ä¸‹ä¸€å€‹éƒ¨ä»½ä¾†ä½œ API çš„ä¸²æ¥  
é‚£éº¼æ˜å¤©è¦‹å›‰~~


---

## Day 14.


ç¾åœ¨å„å¼å„æ¨£çš„è³‡æ–™éƒ½å­˜æ”¾åœ¨é›²ç«¯ï¼ŒApp æœ¬èº«ä¸æœƒå­˜å¤ªå¤šè³‡è¨Šï¼Œæ‰€ä»¥æ¥ Web API å¹¾ä¹æ˜¯ç¾ä»£ App å¿…ç„¶è¦ä½œçš„äº‹ã€‚

> æƒ³ç•¶åˆé«˜ä¸­çš„æ™‚å€™ï¼Œè½å€‹éŸ³æ¨‚éƒ½é‚„è¦ä¸‹è¼‰æ”¾åˆ° MP3ï¼Œç¾åœ¨éƒ½æ˜¯å„ç¨®ä¸²æµé˜¿...
 
æ—¢ç„¶æ˜¯ GitHub Appï¼Œå°±ä¸€å®šè¦ä¸²æ¥ GitHub çš„ API æ‹‰~

--

### æ¬¸!? å“ªäº› API é˜¿ï¼Ÿ

å…¶å¯¦é€™éšæ®µä¹Ÿå°±ä¸‰å€‹ API è¦ä¸²æ¥ã€‚  
åˆ†åˆ¥æ˜¯ GitHub APIã€Hacker News API å’Œ GitHub Trending API 

è€Œä¸”èªªæ˜¯ä¸²æ¥ï¼Œä¸éä½ ä¹ŸçŸ¥é“ï¼Œå¦‚æœæœ‰åˆ¥äººä½œå¥½çš„å¥—ä»¶ï¼Œç‚ºä½•ä¸ç”¨å‘¢ï¼Ÿ

å¾ˆå¹¸é‹çš„æ˜¯ï¼Œå‰å…©å€‹ APIï¼Œæˆ‘æœƒåˆ†åˆ¥ä½¿ç”¨ [`github`](https://pub.dev/packages/github) å’Œ [`hnpwa_client`](https://pub.dev/packages/hnpwa_client) é€™å…©å€‹å¥—ä»¶ã€‚

ä½†å¾ˆæ®˜å¿µçš„æ˜¯ï¼ŒGitHub Trending API çœ‹ä¾†æ˜¯å¿…é ˆè‡ªå·±æ¶æ§‹ç¨‹å¼ç¢¼...  
æ‰€ä»¥ GitHub Trending API é€™éƒ¨ä»½ï¼Œæˆ‘æ‰“ç®—æ”¾åˆ°é€™éšæ®µæœ€å¾Œå†è¬›ã€‚

--

å¥½æ‹‰ï¼Œè©±ä¸å¤šèªª!  
æˆ‘ç›´æ¥é€²å…¥ä¸»é¡Œå§~

### é¦–é  - Hacker News

`hnpwa_client` é€™å€‹å¥—ä»¶å‘¢ï¼Œå…¶å¯¦å®ƒä¸¦ä¸æ˜¯ç›´æ¥æ•´åˆå®˜æ–¹çš„ Hacker News APIï¼Œ
è€Œæ˜¯é€£æ¥ [`HNPWA api`](https://github.com/tastejs/hacker-news-pwas) é€™å€‹ Project çš„ APIã€‚  

å€‹äººè¦ºå¾—åŸå› åœ¨æ–¼:
1. `HNPWA api` æ˜¯å°ˆé–€ç‚º PWA æˆ– Mobile App è¨­è¨ˆçš„ã€‚
2. è¨­è¨ˆçš„æ¯”å®˜æ–¹çš„ API é‚„å¥½ä½¿ç”¨ã€‚

--

æˆ‘ä¿®æ”¹çš„æ­¥é©Ÿå¾ˆç°¡å–®:

1. åœ¨ `_HomePageState` è£¡å¯« `final HnpwaClient hnClient = HnpwaClient();`ï¼Œå®£å‘Š `hnClient` é€™å€‹è®Šæ•¸æ–¹ä¾¿åœ¨é€™å€‹ State è£¡é¢ä½¿ç”¨ã€‚
2. é‡å¯«(override) `initState()` å‡½æ•¸ï¼Œèª¿ç”¨æˆ‘è‡ªå·±å¯«çš„å‡½æ•¸ `fetchHNData()`
3. `fetchHNData()` è£¡é¢èª¿ç”¨ `hnpwa_client` çš„æ–¹æ³• `hnClient.news()` å’Œ `hnClient.newest()`ã€‚
4. åœ¨ setState å‡½æ•¸è£¡æŒ‡å®šå€¼çµ¦ `_hnTops` å’Œ `_hnNews` é€™å…©å€‹è®Šæ•¸ã€‚
    ```
    _hnTops = hnNew.items;
    _hnNews = hnNewest.items;
    ```

[![day14-1.jpeg](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day14-1.jpeg?raw=true)](https://github.com/BbsonLin/gitme_reborn/commit/ba59ff7a3b589c64ee1fe8193fe591220fb141c4)

æ”¹å®Œä¹‹å¾Œï¼Œå†æœ‰é€£ç·šç‹€æ…‹æ™‚ä¸€é€²åˆ°é¦–é å°±æœƒè®€å– Hacker News å›‰~

![day14-2.gif](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day14-2.gif?raw=true)


### é–‹å•Ÿ Hack News é€£çµ

é€™é‚Šç¨å¾®å†åšä¸€å€‹ç°¡æ˜“çš„åŠŸèƒ½ï¼Œå°±æ˜¯é»æ“Š Hack News çš„ ListTile å¾Œæœƒè‡ªå‹•ç”¨ç€è¦½å™¨é–‹å•Ÿé€£çµã€‚

é€™å€‹æ™‚å€™éå¸¸ç°¡å–®çš„ä¾è³´å¦ä¸€å€‹ Flutter Team é–‹ç™¼çš„å¥—ä»¶ [`url_launcher`](https://pub.dev/packages/url_launcher)ã€‚  
å®ƒæœƒå¹«ä½ è‡ªå‹•çš„ç”¨ä½ æ‰‹æ©Ÿç³»çµ±(iOS è·Ÿ Android éƒ½æ”¯æ´)é è¨­çš„æ–¹å¼é–‹å•Ÿ URLï¼Œä¸è«–æ˜¯ `http(s)` ã€`mailto`ã€`tel` è·Ÿ `sms` éƒ½æœƒè™•ç†å–”~

[![day14-3.jpeg](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day14-3.jpeg?raw=true)](https://github.com/BbsonLin/gitme_reborn/commit/343a2cfc4f4ab18e73f79863797b99a9be5db1a3#diff-d3cda190df50f3330b22952d914ba8fe)

`lib/utils.dart`

``` dart
import "package:flutter/material.dart";
import 'package:url_launcher/url_launcher.dart';

Color hexToColor(String code) {...}

Future launchURL(url) async {
  if (await canLaunch(url)) {
    await launch(url);
  } else {
    throw 'Could not launch $url';
  }
}
```

ç¨‹å¼ä¸Šéå¸¸ç°¡å–®ï¼Œåœ¨ `ListTile` çš„ `onTap` èª¿ç”¨ `launchURL`ï¼Œé€™æ¨£å°±å¯ä»¥å›‰~

![day14-4.gif](https://github.com/BbsonLin/ithome-ironman/blob/master/2019-09/images/day14-4.gif?raw=true)

--

ä»Šå¤©ä¸»è¦æ˜¯é€²å…¥ç¬¬äºŒéšæ®µçš„ç¬¬ä¸€å¤©ï¼Œå…ˆå°è©¦èº«æ‰‹ï¼Œç¨‹å¼ç¢¼çš„éƒ¨ä»½ä¸¦ä¸é›£ã€‚  
ä¹‹å¾Œæœƒæ…¢æ…¢é€²å…¥æœ€ä¸»è¦çš„ GitHub API å›‰~


---

